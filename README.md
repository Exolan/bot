# Бот "База знаний"
Телеграм-бот который:
- Хранит информацию в иерархичной структуре (темы/подтемы)
- Даёт ответы через кнопки и семантический поиск
- Автоматически переводит текст в вектора
- Позволяет легко обновлять контент через БД

Технологии: Python + Aiogram + MySQL + E5-эмбеддинги

(*Последняя версия 0.0.1 является актуальной. Бот будет дорабатываться, следите за обновлениями*)


## Требования

Перед началом убедитесь, что у вас установлено: 
   1. Python 3.10.4 ([скачать](https://www.python.org/downloads/release/python-3104/)). Во время установки убедитесь, что вы выбрали *"Add Python 3.10 to PATH"*
   2. MySQL 8.0+ ([скачать](https://dev.mysql.com/downloads/installer/)). Подробнее ознакомиться с установкой MySQL можно ниже



## Установка MySQL и создание базы данных

   **Установка MySQL**
   
   1. Скачайте инсталятор по ссылке ([скачать](https://dev.mysql.com/downloads/installer/))
   2. В открывшемся окне выберите *Full* установку
   3. Нажмите *Execute*, после чего начнется установка программ MySQL. Убедитесь, что все программы были установлены успешно
   4. В окне *Accounts and Roles* введите пароль от стандартного пользователя root. Запомните этот пароль, он понадобится позже. Нажимайте *Next*
   5. Нажмите *Execute* и убедитесь, что установка всех зависимостей прошло успешно. Нажимайте *Next*
   6. В окне *Connect To Server* введите пароль от пользователя *root*, который вы указывали в *шаге 4*, и нажмите *Check*
   7. Нажмите *Execute* и убедитесь, что установка всех зависимостей прошло успешно. Нажимайте *Finish*
   8. В окне *Installation Complete* уберите галочку с *Start MySQL Shell after setup*, так как он нам дальше не понадобится

      (*Пример гайда по установке MySQL на Windows можно посмотреть [здесь](https://rutube.ru/video/9421738a71b7b57a12aaf711cb96fd94/)*)

   **Создание базы данный MySQL**:
   
   1. После установки MySQL у вас запустится *MySQL Workbench*. Нажмите на *Local instance MySQL80* и введите пароль от пользователя *root*
   2. Вам откроется интерфейс. Нажмите *File* -> *Open SQL Script*. В открывшемся окне выберите *create.sql.example* (если данного файла не видно, то выберите показ всех файлов возле поля имени файла)
   3. Файл *create.sql.example* содержит в себе код создания базы данных. Измените имя в 1 и 3 строке на то, которое вам нужно, и запустите скрипт (желтая молния)
   4. Убедитесь, что база данных была успешно создана во вкладке *Output* (должны быть зеленые значки)
   5. Откройте файл *insert.sql.example* аналогичным способом (*шаг 2*), замените имя в 1 строке на ваше и запустите скрипт (*шаг 3*). Этот код заполняет базу данных нужной информацией
   6. Убедитесь, что данные были внесены успешно (*шаг 4*)
   


## Получение токена бота

   1.  Перейдите по ссылке в [@BotFather](https://telegram.me/BotFather)
   2.  Чтобы создать бота через *BotFather*, выбираем команду /newbot. BotFather попросит настроить название и имя для бота
   3.  При создании бота *BotFather* генерирует уникальный токен — ключ к вашему чат-боту. Это специальный идентификатор, с помощью которого созданный вами чат-бот в Телеграме проходит авторизацию в интерфейсе мессенджера



## Установка бота

Убедитесь, что база данных успешно создана и заполнена, а токен бота готов к использованию.

   1.	 Измените значения в файле *.env.example* на свои (у вас уже должны быть созданы база данных и токен бота) и сохраните как *.env*
   2.	 Запустите файл *start bot.bat*. Он установит все нужные зависимости и запустит бота. Не закрывайте всплывающее окно. В дальнейшем файл *start bot.bat* будет нужен для запуска самого бота
   3.	 Для работы поиска нужно преобразовать информацию базы данных в цифровой вид. Для этого запустите *vectorize.bat*
